<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Sistema de Gestión</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* Estilos de Contenedores con Glassmorphism */
        .filter-container, .table-container {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        /* Estilos de Tabla */
        .table thead th {
            background-color: rgba(0, 0, 0, 0.05);
            color: #444;
            font-weight: 600;
            border: none;
            padding: 15px;
        }

        .table tbody tr {
            background-color: rgba(255, 255, 255, 0.4);
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .table tbody tr:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.9) !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        /* Fondo General */
        body {
            background: linear-gradient(135deg, #f5f5dc 0%, #e8e6e1 100%);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(12px);
            border-radius: 25px;
            padding: 2.5rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-width: 1100px;
        }

        /* Badges de Estados Pastel */
        .badge { border-radius: 50px; padding: 0.6em 1.2em; font-weight: 500; }
        .badge-pendiente { background-color: #ffe082; color: #5d4037; }
        .badge-confirmado { background-color: #81d4fa; color: #01579b; }
        .badge-completado { background-color: #a5d6a7; color: #1b5e20; }
        .badge-cancelado { background-color: #ef9a9a; color: #b71c1c; }

        /* Botones Personalizados */
        .btn { border-radius: 12px; font-weight: 500; transition: all 0.3s ease; }
        .btn-editar { background-color: #a7c7e7; color: #333; border: none; }
        .btn-cancelar { background-color: #f4a6a6; color: #fff; border: none; }

        /* Animaciones */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .container { animation: fadeIn 0.4s ease-out; }
    </style>
</head>

<body>
<div class="container mt-4">
    <div th:insert="~{::contenido}"></div>
</div>

<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {
        const errorMsg = /*[[${error}]]*/ null;
        const successMsg = /*[[${success}]]*/ null;

        const swalConfig = {
            background: '#fafafa',
            customClass: { popup: 'rounded-4 shadow' }
        };

        if (errorMsg) {
            Swal.fire({
                ...swalConfig,
                icon: 'error',
                title: 'Atención',
                text: errorMsg,
                confirmButtonColor: '#ef9a9a'
            });
        }

        if (successMsg) {
            Swal.fire({
                ...swalConfig,
                icon: 'success',
                title: '¡Hecho!',
                text: successMsg,
                timer: 2500,
                showConfirmButton: false
            });
        }
    });
</script>

<script>
    function confirmarGuardado(formId, mensaje) {
        Swal.fire({
            title: '¿Estás seguro?',
            text: mensaje,
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#a5d6a7',
            cancelButtonColor: '#ef9a9a',
            confirmButtonText: 'Sí, guardar',
            cancelButtonText: 'Cancelar',
            background: '#fafafa',
            customClass: { popup: 'rounded-4' }
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.showLoading(); // Muestra el cargando para evitar delay visual
                document.getElementById(formId).submit();
            }
        });
    }

    function confirmarCancelacion(id) {
        Swal.fire({
            title: '¿Confirmar cancelación?',
            text: "Esta acción no se puede deshacer",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#f4a6a6',
            cancelButtonColor: '#a7c7e7',
            confirmButtonText: 'Sí, cancelar turno',
            cancelButtonText: 'No, mantenerlo',
            background: '#fafafa',
            customClass: { popup: 'rounded-4' }
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.showLoading();
                const form = document.createElement('form');
                form.method = 'post';
                form.action = '/admin/turnos/cancelar/' + id;
                document.body.appendChild(form);
                form.submit();
            }
        });
    }
</script>
</body>
</html>